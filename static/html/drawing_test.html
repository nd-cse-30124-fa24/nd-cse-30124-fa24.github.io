<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Touch API Test</title>
    <style>
      h1 {
        margin-top: 0;
        color: #ccc;
      }
      canvas {
        width: 300px;
        height: 300px;
        border: 4px solid black;
        display: block;
        margin-bottom: 20px;
        background-size: cover;
        background-position: center;
      }
      #canvas1 {
        background-image: url('../img/Lecture_10_Unsupervised_Learning_Clustering_1.png'); /* Updated path */
      }
      #canvas2 {
        background-image: url('../img/Lecture_10_Unsupervised_Learning_Clustering_2.png'); /* Updated path */
      }
      iframe {
        display: block;
        margin-top: 20px;
        width: 100%;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <h1>Demo of Apple Pencil / 3D touch API</h1>
    <canvas id="canvas1"></canvas> <!-- Canvas with first background -->
    <canvas id="canvas2"></canvas> <!-- Canvas with second background -->
    <iframe src="https://jupyterlite.github.io/demo/repl/index.html?kernel=python&toolbar=1"></iframe>
  
    <script>
      // Function to get the correct mouse position within the canvas
      function getMousePos(canvas, event) {
        const rect = canvas.getBoundingClientRect();
        return {
          x: (event.clientX - rect.left) * (canvas.width / rect.width),
          y: (event.clientY - rect.top) * (canvas.height / rect.height)
        };
      }
  
      // Freehand drawing implementation
      function setupCanvasForDrawing(canvas) {
        const ctx = canvas.getContext('2d');
        let drawing = false;
  
        // Mouse down event to start drawing
        canvas.addEventListener('mousedown', function(e) {
          drawing = true;
          const pos = getMousePos(canvas, e);
          ctx.beginPath(); // Start a new path
          ctx.moveTo(pos.x, pos.y); // Move the pen to the starting point
        });
  
        // Mouse move event to draw when the mouse is pressed down
        canvas.addEventListener('mousemove', function(e) {
          if (!drawing) return;
          const pos = getMousePos(canvas, e);
          ctx.lineTo(pos.x, pos.y); // Draw a line to the current mouse position
          ctx.strokeStyle = 'red'; // Set the stroke color
          ctx.lineWidth = 2; // Set the line width
          ctx.stroke(); // Apply the stroke
        });
  
        // Mouse up event to stop drawing
        canvas.addEventListener('mouseup', function() {
          drawing = false;
        });
  
        // Mouse out event to stop drawing if the mouse leaves the canvas
        canvas.addEventListener('mouseout', function() {
          drawing = false;
        });
      }
  
      // Initialize both canvases for freehand drawing
      setupCanvasForDrawing(document.getElementById('canvas1'));
      setupCanvasForDrawing(document.getElementById('canvas2'));
    </script>
  </body>